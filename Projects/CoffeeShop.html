<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  <title>Optimizing Coffee Shop Revenue Using Regression Project</title>
</head>
<body>
  <h1>Project Three: Optimizing Coffee Shop Revenue Using Regression </h1>
  
  <h2>The Problem</h2>
  <p>
  Predicting a coffee shop's daily performance can help owners fine-tune their strategies for better profitability. According to the National Coffee Association (NCA), "The number of American adults who have had coffee in the past day has increased by 37% since 2004, putting past-day coffee consumption at its highest level in more than 20 years." With people drinking coffee more than ever before, it's important for coffee shops to understand what factors drive sales. 
  <p>
    Using the 
    <a href="https://www.kaggle.com/datasets/himelsarder/coffee-shop-daily-revenue-prediction-dataset/data" target="_blank">
      Coffee Shop Daily Revenue Prediction Dataset
    </a>, this project aims to answer:
  </p>
  <ul>
    <li>How much revenue will the coffee shop generate on a given day based on customer traffic, marketing spend, and other factors?</li> 
    <!--<li>How does driving experience influence accident severity?</li> -->
  </ul>
  </p>
  <p>
    This project aims to uncover meaningful patterns in daily coffee shop revenue and dive into how factors like marketing spend, foot traffic, and staffing impact sales performance through regression analysis.
  </p>
  
  <h2>Dataset Information</h2>
  <p>The dataset contains 2,000 rows, each representing a day of operation for a coffee shop, and 7 features. These features are important variables that influence daily revenue. The features include:</p>

<table border="1">
  <thead>
    <tr>
      <th>Feature</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Number of Customers Per Day</td>
      <td>Total number of customers visiting the coffee shop on any given day.</td>
    </tr>
    <tr>
      <td>Average Order Value ($)</td>
      <td>The average dollar amount spent by each customer during their visit.</td>
    </tr>
    <tr>
      <td>Operating Hours Per Day</td>
      <td>The total number of hours the coffee shop is open for business each day.</td>
    </tr>
    <tr>
      <td>Number of Employees</td>
      <td>The number of employees working on a given day. This can influence service speed, customer satisfaction, and ultimately, sales.</td>
    </tr>
    <tr>
      <td>Marketing Spend Per Day ($)</td>
      <td>The amount of money spent on marketing campaigns or promotions on any given day.</td>
    </tr>
    <tr>
      <td>Location Foot Traffic (people/hour)</td>
      <td>The number of people passing by the coffee shop per hour, a variable indicative of the shop's location and its potential to attract customers.</td>
    </tr>
    <tr>
      <td>Daily Revenue ($)</td>
      <td>The total revenue generated by the coffee shop each day. It is calculated as a combination of customer visits, average spending, and other operational factors like marketing spend and staff availability.</td>
    </tr>
  </tbody>
</table>


  <h2>What is regression and how does it work?</h2>
<p>
  Regression in machine learning refers to a supervised learning technique where the goal is to predict a continuous numerical value based on one or more independent features. It finds relationships between variables so that predictions can be made. There are many types of regression such as simple linear regression, multiple linear regression, and support vector regression.
</p>
<p>
  In this project, I used Linear Regression, Lasso Regression, and Random Forest Regression to model the coffee shop’s performance.
</p>
<p>
  <strong>Linear Regression</strong> is the most straightforward. It tries to fit a straight line through the data using the equation:
</p>
<p style="text-align: center;">
  $$y = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + \cdots + \beta_n x_n + \varepsilon$$
</p>
<p>
  where:<br>
  &nbsp;&nbsp;&nbsp;&nbsp; <em>y</em> is the predicted output,<br>
  &nbsp;&nbsp;&nbsp;&nbsp; <em>x₁...xₙ</em> are the input features,<br>
  &nbsp;&nbsp;&nbsp;&nbsp; <em>β</em> values are the learned weights (coefficients),<br>
  &nbsp;&nbsp;&nbsp;&nbsp; <em>ε</em> is the error term.
</p>
  
<p>
  <strong>Random Forest Regression</strong> is a non-linear, ensemble learning method. It builds multiple decision trees and averages their predictions to improve accuracy and reduce overfitting. Unlike linear models, it can capture complex relationships between variables and handle a mix of data types more effectively.
</p>
  
<p>
  <strong>Lasso Regression</strong> is similar to linear regression but includes regularization. It tries to reduce overfitting by penalizing the absolute size of the coefficients. The loss function looks like:
</p>

<p style="text-align: center;">
  $$Loss = MSE + \lambda \sum_{j=1}^{n} |\beta_j|$$
</p>
<p>
  This encourages sparsity, which means some coefficients can be driven to zero, effectively performing feature selection.
</p>

  <h2>Experiment 1: Data understanding</h2>
<p>
    To begin the analysis, I first explored the dataset for any patterns, correlations, and distributions. I made a pairplot to visualize the relationships between all of the features. From this I noticed that Number_of_Customers_Per_Day and Average_Order_Value had a strong corelation with Daily_Revenue. Marketing_Spend_Per_Day and Location_Foot_Traffic had only a faint amount of correlation with Daily_Revenue. Then for Operating_Hours_Per_Day and Number_of_Employees
   theres no corelation with Daily_Revenue.
</p>
<img src="../docs/CoffeeDE.png" alt="Viz 1">

  <h2>Experiment 1: Pre-processing</h2>
<p>
    Before applying the model, I first checked the dataset for missing values and duplicates. This is an important step because any missing data or duplicate records could skew the results of the regression model. I used basic data exploration methods like isnull() to identify missing values and duplicated() to check for any duplicate rows.
  Since the dataset did not contain any missing values or duplicates, I began modeling without needing to clean the data further.
</p>

  <h2>Experiment 1: Modeling</h2>
<p>
    For the first experiment, I built a linear regression model to predict the coffee shop's performance based on the available features. The model was implemented using the LinearRegression class from the scikit-learn library in Python. I split the dataset into training and testing sets, training the model on the training data, and using it to predict on the testing data.
</p>
  
  <h2>Experiment 1: Evaluation</h2>
<p>
    To evaluate the performance of the linear regression model, I used several key metrics:
</p>
<ul>
  <li><strong>Mean Absolute Error (MAE):</strong> 245.85</li>
  <li><strong>Mean Squared Error (MSE):</strong> 97065.55</li>
  <li><strong>Root Mean Squared Error (RMSE):</strong> 311.55</li>
  <li><strong>R² Score:</strong> 0.89</li>
</ul>
  <p>
  These results indicate that the model fits the data well. With an R² score of 0.89, the model explains 89% of the variance in the coffee shop’s performance, demonstrating strong predictive capability and a good overall fit.
</p>
<img src="../docs/CoffeeEval1.png" alt="Viz 2">
<img src="../docs/CoffeeDis.png" alt="Viz 3">
<img src="../docs/CoffeeProb.png" alt="Viz 4">

 <h2>Experiment 2: Random Forest Regression Model </h2>
  <p>
    For the second experiment, I implemented a Random Forest Regressor model to improve predictive performance by capturing more complex relationships in the data. This model was implemented using the RandomForestRegressor class from the scikit-learn library with n_estimators set to 500 and oob_score enabled to validate accuracy internally.
</p>
<p>
    To evaluate the performance of the Random Forest model, I used the following metrics:
</p>
<ul>
  <li><strong>Mean Absolute Error (MAE):</strong> 224.96</li>
  <li><strong>Mean Squared Error (MSE):</strong> 80572.78</li>
  <li><strong>OOB Score:</strong> 0.91</li>
</ul>
  <p>
  These results show a clear improvement over the linear regression model. The Mean Absolute Error (MAE) dropped from 245.85 to 224.96, and the Mean Squared Error (MSE) decreased from 97,065.55 to 80,572.78. Additionally, the Out-of-Bag (OOB) score was 0.91, indicating better generalization. These improvements suggest the Random Forest model captures more complex relationships and delivers stronger performance overall.
</p>
  <img src="../docs/rf1.png" alt="Viz 2">
  <img src="../docs/rf2.png" alt="Viz 2">
  <h2>Experiment 3: Lasso Regression</h2>
  <p>
    For the third experiment, I tried Lasso Regression to see if introducing regularization could help reduce potential overfitting and identify key features. I used the Lasso class from scikit-learn and kept the same training and testing strategy.
</p>
<p>
    The performance metrics for the Lasso model were:
</p>
<ul>
  <li><strong>Mean Absolute Error (MAE):</strong> 245.83</li>
  <li><strong>Mean Squared Error (MSE):</strong> 97057.74</li>
  <li><strong>R² Score:</strong> 0.89</li>
</ul>
  <p>
  The Lasso model performed slightly better than the original linear regression in terms of MAE and MSE. However, its R² score remained at 0.89. Lasso helped simplify the model by reducing the impact of less important features, but it still couldn’t effectively model nonlinear patterns as well as the Random Forest.
</p>
  <h2>Impact Section</h2>
  <p>
    This project has the potential to make a big impact on how coffee shop businesses make data-driven decisions. By accurately predicting performance based on factors like the number of customer per day, average sales, and marketing costs, shop owners can better understand what drives revenue and optimize their operations. That might mean adjusting store hours, staffing, or even product offerings based on what the model finds most important.
  </p>
<p>
  However, there are some ethical concerns. If this model was used without transparency or context, there’s a risk of making decisions that ignore human factors like cutting employees based on predicted sales, without considering the employees well-being. Also, if the data used contains hidden biases, it could reinforce unfair business practices. So, it’s important to make sure the data is interpreted responsibly.
</p>
  <h2>Conclusion</h2>
<p>
   From this project, I learned a lot about how different models handle the same data in totally different ways. Linear regression gave me a solid baseline, but once I switched to Random Forest, I noticed better accuracy, which showed me how much more powerful ensemble methods can be for capturing complex patterns.
</p>
  <p>
  I also saw how Lasso helped simplify the model and cut down on noise by focusing on the most important features, even though it didn’t perform quite as well as Random Forest. Overall, this project helped me see the importance of not just building models, but really evaluating them and making smarter choices based on what the data’s telling me. 
</p>

  <h2>My Code</h2>
   <!-- I used https://nbviewer.jupyter.org/ -->
  <iframe src="https://nbviewer.org/github/UniqueDavis/Portfolio/blob/main/Code/CoffeeShop.ipynb" width="100%" height="600px"></iframe>
  
  <h2>References</h2>
  <ul>
    <li>
      <a href="https://www.kaggle.com/datasets/himelsarder/coffee-shop-daily-revenue-prediction-dataset/data">
        Coffee Shop Daily Revenue Prediction Dataset - Kaggle
      </a>
    </li>
    <li>
      <a href="https://www.geeksforgeeks.org/regression-in-machine-learning/" target="_blank">
        Regression in machine learning - GeeksforGeeks
      </a>
    </li>
    <li>
      <a href="https://www.ncausa.org/Newsroom/Daily-coffee-consumption-at-20-year-high-up-nearly-40" target="_blank">
        Daily coffee consumption at 20-year high
      </a>
    </li>
    <li>
      <a href="https://chatgpt.com/" target="_blank">
        ChatGPT - OpenAI 
      </a>
      <em> (ChatGPT helped with debugging and coding concepts; all final work is my own.)</em>
    </li>
  </ul>

</body>
</html>
